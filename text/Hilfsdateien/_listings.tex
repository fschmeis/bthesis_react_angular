\usepackage{listings}
\usepackage{xcolor}
\usepackage[scaled]{DejaVuSansMono}

\usepackage{tcolorbox}
\newtcbox{\inlinecode}{on line, boxrule=0pt, boxsep=0pt, top=2pt, left=2pt, bottom=2pt, right=2pt, colback=gray!15, colframe=white, fontupper={\ttfamily \footnotesize}}


\usepackage{caption}
\usepackage[newfloat]{minted}

\DeclareCaptionFormat{captionFormat}{%
  \colorbox{gray!50}{\parbox{\dimexpr\textwidth-2\fboxsep-2\fboxrule\relax}{#1#2#3}}
} 
\captionsetup[listing]{position=top, skip=-10pt, format=captionFormat}

\setminted{frame=lines, framesep=2mm, numbersep=5pt, baselinestretch=1.2, fontsize=\footnotesize, linenos}
